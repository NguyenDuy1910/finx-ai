Parsed Query:
Intent: {{ parsed_query.intent }}
Entities: {{ parsed_query.entities | join(', ') }}
{% if parsed_query.filters %}
Filters: {{ parsed_query.filters }}
{% endif %}
{% if parsed_query.time_range %}
Time Range: {{ parsed_query.time_range }}
{% endif %}
{% if parsed_query.aggregations %}
Aggregations: {{ parsed_query.aggregations | join(', ') }}
{% endif %}

Database: {{ database }}

{% if graph_results %}
Knowledge Graph Search Results:
{% for result in graph_results %}
- {{ result.name }}: {{ result.get('fact', result.get('summary', '')) }}
{% endfor %}
{% endif %}

{% if resolved_terms %}
Resolved Business Terms:
{% for term in resolved_terms %}
- {{ term.name }}: {{ term.fact }}
{% endfor %}
{% endif %}

Discover the most relevant tables and their relationships for this query. Return valid JSON only.

